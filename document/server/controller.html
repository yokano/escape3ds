<!--
	Copyright 2009 The Go Authors. All rights reserved.
	Use of this source code is governed by a BSD-style
	license that can be found in the LICENSE file.
-->
<!--
	Note: Static (i.e., not template-generated) href and id
	attributes start with "pkg-" to make it impossible for
	them to conflict with generated attributes (some of which
	correspond to Go identifiers).
-->

	
		<div id="short-nav">
			<dl>
			<dd><code>import "./server/controller"</code></dd>
			</dl>
			<dl>
			<dd><a href="#pkg-overview" class="overviewLink">Overview</a></dd>
			<dd><a href="#pkg-index">Index</a></dd>
			
			
			
			</dl>
		</div>
		<!-- The package's Name is printed as title by the top-level template -->
		<div id="pkg-overview" class="toggleVisible">
			<div class="collapsed">
				<h2 class="toggleButton" title="Click to show Overview section">Overview ▹</h2>
			</div>
			<div class="expanded">
				<h2 class="toggleButton" title="Click to hide Overview section">Overview ▾</h2>
				<p>
*
</p>
<pre>+ controller.go
* http.HandleFunc() を書きやすくするためクラス化はしない
* URL パターンに該当する処理を書く
* クラス化されたModelとViewを使って処理を進める
</pre>

			</div>
		</div>
		
	
		<h2 id="pkg-index">Index</h2>
		<!-- Table of contents for API; must be named manual-nav to turn off auto nav. -->
		<div id="manual-nav">
			<dl>
			
			
			
			
				
				<dd><a href="#Controller">type Controller</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#NewController">func NewController() *Controller</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="#Controller.AddGame">func (this *Controller) AddGame(w http.ResponseWriter, r *http.Request)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#Controller.AddUser">func (this *Controller) AddUser(w http.ResponseWriter, r *http.Request)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#Controller.CallbackFacebook">func (this *Controller) CallbackFacebook(w http.ResponseWriter, r *http.Request)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#Controller.CallbackTwitter">func (this *Controller) CallbackTwitter(w http.ResponseWriter, r *http.Request)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#Controller.CloseSession">func (this *Controller) CloseSession(c appengine.Context, w http.ResponseWriter, r *http.Request)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#Controller.Debug">func (this *Controller) Debug(w http.ResponseWriter, r *http.Request)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#Controller.DeleteCookie">func (this *Controller) DeleteCookie(c appengine.Context, w http.ResponseWriter)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#Controller.DeleteGame">func (this *Controller) DeleteGame(w http.ResponseWriter, r *http.Request)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#Controller.Download">func (this *Controller) Download(w http.ResponseWriter, r *http.Request)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#Controller.Editor">func (this *Controller) Editor(w http.ResponseWriter, r *http.Request)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#Controller.Gamelist">func (this *Controller) Gamelist(w http.ResponseWriter, r *http.Request)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#Controller.GetHandler">func (this *Controller) GetHandler(callback func(this *Controller, w http.ResponseWriter, r *http.Request)) func(http.ResponseWriter, *http.Request)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#Controller.GetInterimUsers">func (this *Controller) GetInterimUsers(w http.ResponseWriter, r *http.Request)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#Controller.GetSession">func (this *Controller) GetSession(c appengine.Context, r *http.Request) string</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#Controller.GetUsers">func (this *Controller) GetUsers(w http.ResponseWriter, r *http.Request)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#Controller.Handle">func (this *Controller) Handle()</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#Controller.InterimRegistration">func (this *Controller) InterimRegistration(w http.ResponseWriter, r *http.Request)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#Controller.Login">func (this *Controller) Login(w http.ResponseWriter, r *http.Request)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#Controller.LoginFacebook">func (this *Controller) LoginFacebook(w http.ResponseWriter, r *http.Request)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#Controller.LoginTwitter">func (this *Controller) LoginTwitter(w http.ResponseWriter, r *http.Request)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#Controller.Logout">func (this *Controller) Logout(w http.ResponseWriter, r *http.Request)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#Controller.Registration">func (this *Controller) Registration(w http.ResponseWriter, r *http.Request)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#Controller.RequestFacebookToken">func (this *Controller) RequestFacebookToken(w http.ResponseWriter, r *http.Request) map[string]string</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#Controller.Session">func (this *Controller) Session(w http.ResponseWriter, r *http.Request) string</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#Controller.StartSession">func (this *Controller) StartSession(w http.ResponseWriter, r *http.Request, key string)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#Controller.SyncGame">func (this *Controller) SyncGame(c appengine.Context, w http.ResponseWriter, r *http.Request, gameKey string)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#Controller.SyncHandler">func (this *Controller) SyncHandler(w http.ResponseWriter, r *http.Request)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#Controller.Top">func (this *Controller) Top(w http.ResponseWriter, r *http.Request)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#Controller.Upload">func (this *Controller) Upload(w http.ResponseWriter, r *http.Request)</a></dd>
				
			
			
		</dl>

		

		
			<h4>Package files</h4>
			<p>
			<span style="font-size:90%">
			
				<a href="/target/controller.go">controller.go</a>
			
			</span>
			</p>
		
	
		
		
		
		
			
			
			<h2 id="Controller">type <a href="/target/controller.go?s=391:417#L12">Controller</a></h2>
			<pre>type Controller struct {
}</pre>
			

			

			

			

			
				
				<h3 id="NewController">func <a href="/target/controller.go?s=538:570#L19">NewController</a></h3>
				<pre>func NewController() *Controller</pre>
				<p>
*
</p>
<pre>* Controller オブジェクトを作成して返す
* @returns {*Controller} 作成したオブジェクト
</pre>

				
			

			
				
				<h3 id="Controller.AddGame">func (*Controller) <a href="/target/controller.go?s=11974:12045#L394">AddGame</a></h3>
				<pre>func (this *Controller) AddGame(w http.ResponseWriter, r *http.Request)</pre>
				<p>
*
</p>
<pre>* ゲームの新規追加
* @param {http.ResponseWriter} w 応答先
* @param {*http.Request} r リクエスト
</pre>

				
				
			
				
				<h3 id="Controller.AddUser">func (*Controller) <a href="/target/controller.go?s=8456:8527#L265">AddUser</a></h3>
				<pre>func (this *Controller) AddUser(w http.ResponseWriter, r *http.Request)</pre>
				<p>
*
</p>
<pre>* ユーザの追加
* @param {http.ResponseWriter} w 応答先
* @param {*http.Request} r リクエスト
</pre>

				
				
			
				
				<h3 id="Controller.CallbackFacebook">func (*Controller) <a href="/target/controller.go?s=6793:6872#L203">CallbackFacebook</a></h3>
				<pre>func (this *Controller) CallbackFacebook(w http.ResponseWriter, r *http.Request)</pre>
				<p>
*
</p>
<pre>* Facebookからのコールバック
* @function
* @param {http.ResponseWriter} w 応答先
* @param {*http.Request} r リクエスト
</pre>

				
				
			
				
				<h3 id="Controller.CallbackTwitter">func (*Controller) <a href="/target/controller.go?s=3911:3990#L115">CallbackTwitter</a></h3>
				<pre>func (this *Controller) CallbackTwitter(w http.ResponseWriter, r *http.Request)</pre>
				<p>
*
</p>
<pre>* Twitter からのコールバック * @param {http.ResponseWriter} w 応答先
* @param {*http.Request} r リクエスト
</pre>

				
				
			
				
				<h3 id="Controller.CloseSession">func (*Controller) <a href="/target/controller.go?s=16485:16582#L550">CloseSession</a></h3>
				<pre>func (this *Controller) CloseSession(c appengine.Context, w http.ResponseWriter, r *http.Request)</pre>
				<p>
*
</p>
<pre>* セッションを終了する
* @function
* @param
* @param {string} sessionId
</pre>

				
				
			
				
				<h3 id="Controller.Debug">func (*Controller) <a href="/target/controller.go?s=9056:9125#L285">Debug</a></h3>
				<pre>func (this *Controller) Debug(w http.ResponseWriter, r *http.Request)</pre>
				<p>
*
</p>
<pre>* デバッグツールの表示
* @param {http.ResponseWriter} w 応答先
* @param {*http.Request} r リクエスト
</pre>

				
				
			
				
				<h3 id="Controller.DeleteCookie">func (*Controller) <a href="/target/controller.go?s=16888:16968#L564">DeleteCookie</a></h3>
				<pre>func (this *Controller) DeleteCookie(c appengine.Context, w http.ResponseWriter)</pre>
				<p>
*
</p>
<pre>* セッションIDが保存されたクッキーを削除する
* @function
* @param {appengine.Context} c コンテキスト
* @param {http.ResponseWriter} w 応答先
</pre>

				
				
			
				
				<h3 id="Controller.DeleteGame">func (*Controller) <a href="/target/controller.go?s=13227:13301#L432">DeleteGame</a></h3>
				<pre>func (this *Controller) DeleteGame(w http.ResponseWriter, r *http.Request)</pre>
				<p>
*
</p>
<pre>* ゲームの削除
* ゲームの所有者しか削除することはできない
* @param {http.ResponseWriter} w 応答先
* @param {*http.Request} r リクエスト
</pre>

				
				
			
				
				<h3 id="Controller.Download">func (*Controller) <a href="/target/controller.go?s=18823:18895#L631">Download</a></h3>
				<pre>func (this *Controller) Download(w http.ResponseWriter, r *http.Request)</pre>
				<p>
*
</p>
<pre>* ファイルのダウンロード
* blob key に対応するファイルを提供する
* Ajax で使う
* @function
* @param {http.ResponseWriter} w 応答先
* @param {*http.Request} r リクエスト
</pre>

				
				
			
				
				<h3 id="Controller.Editor">func (*Controller) <a href="/target/controller.go?s=7736:7806#L239">Editor</a></h3>
				<pre>func (this *Controller) Editor(w http.ResponseWriter, r *http.Request)</pre>
				<p>
*
</p>
<pre>* エディタの表示
* @param {http.ResponseWRiter} w 応答先
* @param {*http.Request} r リクエスト
</pre>

				
				
			
				
				<h3 id="Controller.Gamelist">func (*Controller) <a href="/target/controller.go?s=11664:11736#L382">Gamelist</a></h3>
				<pre>func (this *Controller) Gamelist(w http.ResponseWriter, r *http.Request)</pre>
				<p>
*
</p>
<pre>* ゲーム一覧の表示
* @param {http.ResponseWriter} w 応答先
* @param {*http.Request} r リクエスト
</pre>

				
				
			
				
				<h3 id="Controller.GetHandler">func (*Controller) <a href="/target/controller.go?s=1172:1320#L33">GetHandler</a></h3>
				<pre>func (this *Controller) GetHandler(callback func(this *Controller, w http.ResponseWriter, r *http.Request)) func(http.ResponseWriter, *http.Request)</pre>
				<p>
*
</p>
<pre>* メソッドを http.HandleFunc() で呼び出し可能な関数型に変換して返す
* http.HandleFunc() は引数として func(http.ResponseWriter, *http.Request) 型の関数しか渡せない
* コントローラのメソッドをこの関数型で包むことで http.HandleFunc() から呼び出し可能にする
* @method
* @memberof Controller
* @param {func(*Controller, http.ResponseWriter, *http.Request)} メソッド
* @returns {func(http.ResponseWRiter, *http.Request)} 呼び出し可能にしたメソッド
</pre>

				
				
			
				
				<h3 id="Controller.GetInterimUsers">func (*Controller) <a href="/target/controller.go?s=14250:14329#L467">GetInterimUsers</a></h3>
				<pre>func (this *Controller) GetInterimUsers(w http.ResponseWriter, r *http.Request)</pre>
				<p>
*
</p>
<pre>* 仮登録ユーザ一覧の取得
* Ajax で呼び出す
* @function
* @param {http.ResponseWriter} w 応答先
* @param {*http.Request} r リクエスト
</pre>

				
				
			
				
				<h3 id="Controller.GetSession">func (*Controller) <a href="/target/controller.go?s=16091:16170#L530">GetSession</a></h3>
				<pre>func (this *Controller) GetSession(c appengine.Context, r *http.Request) string</pre>
				<p>
*
</p>
<pre>* Cookieに保存されているセッションIDを取得する
* セッションが存在しない場合は空文字を返す
* @function
* @param {appengine.Context} c コンテキスト
* @param {*http.Request} r リクエスト
* @returns {string} セッションIDまたは空文字
</pre>

				
				
			
				
				<h3 id="Controller.GetUsers">func (*Controller) <a href="/target/controller.go?s=14828:14900#L490">GetUsers</a></h3>
				<pre>func (this *Controller) GetUsers(w http.ResponseWriter, r *http.Request)</pre>
				<p>
*
</p>
<pre>* ユーザ一覧の取得
* Ajax で呼び出す
* @function
* @param {http.ResponseWriter} w 応答先
* @param {*http.Request} r リクエスト
</pre>

				
				
			
				
				<h3 id="Controller.Handle">func (*Controller) <a href="/target/controller.go?s=1513:1545#L44">Handle</a></h3>
				<pre>func (this *Controller) Handle()</pre>
				<p>
*
</p>
<pre>* リクエスト URL に合わせて処理を振り分ける
* @method
* @memberof Controller
</pre>

				
				
			
				
				<h3 id="Controller.InterimRegistration">func (*Controller) <a href="/target/controller.go?s=10698:10781#L344">InterimRegistration</a></h3>
				<pre>func (this *Controller) InterimRegistration(w http.ResponseWriter, r *http.Request)</pre>
				<p>
*
</p>
<pre>* 仮登録
* @param {http.ResponseWriter} w 応答先
* @param {*http.Request} r リクエスト
</pre>

				
				
			
				
				<h3 id="Controller.Login">func (*Controller) <a href="/target/controller.go?s=9506:9575#L299">Login</a></h3>
				<pre>func (this *Controller) Login(w http.ResponseWriter, r *http.Request)</pre>
				<p>
*
</p>
<pre>* ログイン
* @param {http.ResponseWriter} w 応答先
* @param {*http.Request} r リクエスト
* @returns {Ajax JSON} result 成功したらtrue
* @returns {Ajax JSON} to 成功した時のリダイレクト先URL
* @returns {Ajax JSON} message 失敗した時のエラーメッセージ
</pre>

				
				
			
				
				<h3 id="Controller.LoginFacebook">func (*Controller) <a href="/target/controller.go?s=5236:5313#L161">LoginFacebook</a></h3>
				<pre>func (this *Controller) LoginFacebook(w http.ResponseWriter, r *http.Request)</pre>
				<p>
*
</p>
<pre>* Facebook でログイン
* @param {http.ResponseWriter} w 応答先
* @param {*http.Request} r リクエスト
</pre>

				
				
			
				
				<h3 id="Controller.LoginTwitter">func (*Controller) <a href="/target/controller.go?s=3407:3483#L104">LoginTwitter</a></h3>
				<pre>func (this *Controller) LoginTwitter(w http.ResponseWriter, r *http.Request)</pre>
				<p>
*
</p>
<pre>* Twitter でログイン
* @param {http.ResponseWriter} w 応答先
* @param {*http.Request} r リクエスト
</pre>

				
				
			
				
				<h3 id="Controller.Logout">func (*Controller) <a href="/target/controller.go?s=10289:10359#L326">Logout</a></h3>
				<pre>func (this *Controller) Logout(w http.ResponseWriter, r *http.Request)</pre>
				<p>
*
</p>
<pre>* ログアウト
* クッキーとmemcacheに保存されたセッション情報を削除する
* @function
* @param {http.ResponseWriter} w 応答先
* @param {*http.Request} r リクエスト
</pre>

				
				
			
				
				<h3 id="Controller.Registration">func (*Controller) <a href="/target/controller.go?s=11306:11382#L366">Registration</a></h3>
				<pre>func (this *Controller) Registration(w http.ResponseWriter, r *http.Request)</pre>
				<p>
*
</p>
<pre>* 本登録する
* @function
* @param {http.ResponseWriter} w 応答先
* @param {*http.Request} r リクエスト
</pre>

				
				
			
				
				<h3 id="Controller.RequestFacebookToken">func (*Controller) <a href="/target/controller.go?s=5866:5968#L174">RequestFacebookToken</a></h3>
				<pre>func (this *Controller) RequestFacebookToken(w http.ResponseWriter, r *http.Request) map[string]string</pre>
				<p>
*
</p>
<pre>* Facebook へアクセストークンを要求する
* この関数は Facebook から認証コードをリダイレクトで渡された時に呼ばれる
* @param {http.ResponseWriter} w 応答先
* @param {*http.Request} r リクエスト
* @returns {map[string]string} ユーザ情報
</pre>

				
				
			
				
				<h3 id="Controller.Session">func (*Controller) <a href="/target/controller.go?s=17492:17570#L580">Session</a></h3>
				<pre>func (this *Controller) Session(w http.ResponseWriter, r *http.Request) string</pre>
				<p>
*
</p>
<pre>* セッションチェック
* ページ表示時に必ず実行する
* クライアントがセッションIDを持っているかどうか調べて
* 持っていなければトップページへ飛ばして空文字を返す
* 持っていたら対応するユーザIDを返す
* @function
* @param {http.ResponseWriter} w 応答先
* @param {*http.Request} r リクエスト
* @returns {string} ユーザキー
</pre>

				
				
			
				
				<h3 id="Controller.StartSession">func (*Controller) <a href="/target/controller.go?s=15513:15601#L514">StartSession</a></h3>
				<pre>func (this *Controller) StartSession(w http.ResponseWriter, r *http.Request, key string)</pre>
				<p>
*
</p>
<pre>* セッションを開始する
* ユーザーキーに関連付いたセッションIDを生成して memcache, cookie に保存する。
* @function
* @param w {http.ResponseWriter} w 応答先
* @param r {*http.Request} r リクエスト
* @param {string} key ユーザのキー
* @returns {string} セッションID
</pre>

				
				
			
				
				<h3 id="Controller.SyncGame">func (*Controller) <a href="/target/controller.go?s=20078:20187#L679">SyncGame</a></h3>
				<pre>func (this *Controller) SyncGame(c appengine.Context, w http.ResponseWriter, r *http.Request, gameKey string)</pre>
				<p>
*
</p>
<pre>* ゲームデータの同期
* @param {appengine.Context} c コンテキストs
* @param {http.ResponseWriter} w 応答先
* @param {*http.Request} r リクエスト
* @param {}
</pre>

				
				
			
				
				<h3 id="Controller.SyncHandler">func (*Controller) <a href="/target/controller.go?s=19478:19553#L656">SyncHandler</a></h3>
				<pre>func (this *Controller) SyncHandler(w http.ResponseWriter, r *http.Request)</pre>
				<p>
*
</p>
<pre>* /sync/* にマッチしたら呼び出される
* URL を解析して更に細かいハンドラへ処理を割り振る
* @function
* @param {http.ResponseWriter} w 応答先
* @param {*http.Request} r リクエスト
</pre>

				
				
			
				
				<h3 id="Controller.Top">func (*Controller) <a href="/target/controller.go?s=3030:3097#L87">Top</a></h3>
				<pre>func (this *Controller) Top(w http.ResponseWriter, r *http.Request)</pre>
				<p>
*
</p>
<pre>* ログインページの表示
* @param {http.ResponseWriter} w 応答先
* @param {*http.Request} r リクエスト
</pre>

				
				
			
				
				<h3 id="Controller.Upload">func (*Controller) <a href="/target/controller.go?s=18322:18392#L611">Upload</a></h3>
				<pre>func (this *Controller) Upload(w http.ResponseWriter, r *http.Request)</pre>
				<p>
*
</p>
<pre>* ファイルのアップロード
* ファイルを blobstore に保存して blob key を返す
* Ajax で使う
* method: POST
*
* @function
* @param {http.ResponseWriter} w 応答先
* @param {*http.Request} r リクエスト
</pre>

				
				
			
		
		</div>
	

	







